#!/usr/bin/env bash

fz(){
   fzf --ansi -0 -1 -q "$search"\
   --preview "bat --theme='OneHalfDark'\
   --style=numbers,changes --color always {}"
}

print_files(){ printf '%s\n' "${files[@]#*${HOME##*/}/}"; }

main(){
   dir=( "$HOME/.Scripts/" "$HOME/.bin/" )
   files=($(fd -c always -d 1 -t x . "${dir[@]}" ))
   file=$(print_files | fz)
   [[ $file ]] && nvim "$HOME/$file"
}

search="$@"
main

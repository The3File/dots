#!/usr/bin/env bash

math(){
	cls="scratchmath"
	geo="100x17-30-30"
	exe="qalc"
	placeholder
}

term(){
	cls="scratchterm"
	geo="100x28+30+30"

	term_placeholder
}

term_placeholder(){
	get_id "$cls"

	[[ -z "$id" ]] || toggle

	$TERMINAL --class $cls,$cls -e tmux new -s 'scratch' ||
	$TERMINAL --class $cls,$cls -e tmux a -t '=scratch'
	#st --class $cls -g $geo -e tmux new -s 'scratch' ||
	#st --class $cls -g $geo -e tmux a -t '=scratch'
}

placeholder(){
	get_id "$cls"
	[[ -z "$id" ]] && new || toggle
}

get_id(){ id=$(xdotool search --class $1); }

toggle(){ bspc node "$id" --flag hidden -f; exit; }

new(){ $TERMINAL --class $cls,$cls -e $exe; }

eval $1
